/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(l){"use strict";l("#sidebarToggle, #sidebarToggleTop").on("click",function(e){l("body").toggleClass("sidebar-toggled"),l(".sidebar").toggleClass("toggled"),l(".sidebar").hasClass("toggled")&&l(".sidebar .collapse").collapse("hide")}),l(window).resize(function(){l(window).width()<768&&l(".sidebar .collapse").collapse("hide"),l(window).width()<480&&!l(".sidebar").hasClass("toggled")&&(l("body").addClass("sidebar-toggled"),l(".sidebar").addClass("toggled"),l(".sidebar .collapse").collapse("hide"))}),l("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){var o;768<l(window).width()&&(o=(o=e.originalEvent).wheelDelta||-o.detail,this.scrollTop+=30*(o<0?1:-1),e.preventDefault())}),l(document).on("scroll",function(){100<l(this).scrollTop()?l(".scroll-to-top").fadeIn():l(".scroll-to-top").fadeOut()}),l(document).on("click","a.scroll-to-top",function(e){var o=l(this);l("html, body").stop().animate({scrollTop:l(o.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery);


//Appel prenom sur le dashboard

document.addEventListener('DOMContentLoaded', function () {
    // Fonction pour récupérer les données depuis l'API
    function fetchData() {
        // Remplacez "http://srv431625.hstgr.cloud:3000/api/v1/user/" par l'URL réelle de votre API
        //recuperation du token
        const jwt_token = localStorage.getItem("jwt")
        fetch("http://srv431625.hstgr.cloud:3000/api/v1/user/", {
            method: 'GET', // Spécifiez la méthode GET
            headers: {
                'Accept': 'application/json',
                'Authorization': 'Bearer '+jwt_token,
                // Ajoutez d'autres en-têtes si nécessaire
            },
            // Ajoutez des options supplémentaires si nécessaire
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erreur réseau");
                }
                return response.json();
            })
            .then(data => {
                console.log("Données récupérées depuis l'API :", data);

                // Vérifiez si la réponse et le nom de l'utilisateur existent
                if (data && data.message && data.message.nom && data.message.prenoms) {
                    // Récupérez la référence de la balise span
                    let welcomeSpan = document.querySelector('.welcome');

                    console.log("Nom de l'utilisateur :", data.message.nom);
                    console.log("Prénom de l'utilisateur :", data.message.prenoms);

                    // Mettez à jour le contenu de la balise span avec le message de bienvenue et le nom complet de l'utilisateur
                    welcomeSpan.textContent = `Bienvenue, ${data.message.prenoms} ${data.message.nom} !`;
                } else {
                    console.error("Données invalides ou nom/prénoms manquants dans la réponse.");
                }
            })
            .catch(error => {
                console.error("Erreur lors de la récupération des données depuis l'API:", error);
            });
    }

    // Appelez la fonction fetchData pour récupérer les données dès que votre script est exécuté
    fetchData();
});
